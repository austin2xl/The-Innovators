<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MY NCR</title>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <style>
        /* Modal Styles */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1000; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(0, 0, 0, 0.4); /* Black with opacity */
}

.modal-content {
    background-color: #fefefe; /* White background for modal content */
    margin: 15% auto; /* Center modal content */
    padding: 20px;
    border: 1px solid #888; /* Border for modal */
    width: 80%; /* Width of the modal content */
    border-radius: 8px; /* Rounded corners */
}

.close {
    color: #aaa; /* Color for close button */
    float: right; /* Position close button to the right */
    font-size: 28px; /* Font size */
    font-weight: bold; /* Bold font */
}

.close:hover,
.close:focus {
    color: black; /* Change color on hover/focus */
    text-decoration: none; /* No underline */
    cursor: pointer; /* Pointer cursor on hover */
}

/* Optional: Additional styling for modal description */
.modal-description {
    margin-top: 10px; /* Space above description */
    font-size: 16px; /* Font size for description */
    line-height: 1.5; /* Improved readability */
}
 /* Button styling */
 button {
    background-color: #5897c9;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 4px;
    margin-right: 5px;
    margin-top: 5px;
}
button:hover {
    opacity: 0.8;
    background-color: green;
}
button.update-btn, button.cancel-btn {
    display: none;
}
button.delete-btn,button.cancel-btn {
    background-color: #f44336; /* Red color for delete button */
}
    </style>
    <header>
        <div class="logo">
            <img src="images/CrossfireLogo.png" alt="NCR Logo">
        </div>
        <div class="hamburger">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <nav class="nav-bar">
            <ul>
                <ul>
                    <li><a href="index.html" class="option">MY NCR</a></li> 
                    <li><a href="new.html" class="option">NEW NCR</a></li> 
                    <li><a href="login.html" class="option">LOG IN</a></li> 
                    <li><a href="help.html" class="option">HELP</a></li> 
                </ul> 
            </ul>
        </nav>
    </header>
    <main>
        <section class="ncr-list">
            <h2>List of Current NCRs</h2>
            <!-- Search bar -->
            <input type="text" id="search-bar" placeholder="Search NCRs by number, supplier, product" aria-label="Search NCRs">
            
            <!-- Filter by status -->
            <label for="status-filter">Filter by Status:</label>
            <select id="status-filter" aria-label="Filter by Status">
                <option value="all">All</option>
                <option value="open">Open</option>
                <option value="closed">Closed</option>
            </select>
            
            <!-- NCR Table -->
            <table>
                <thead>
                    <tr>
                        <th>NCR Number</th>
                        <th>Supplier Name</th>
                        <th>Product Name</th>
                        <th>Status</th>
                        <th>Created Date</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Sample NCR Table Row with Edit and Delete Buttons -->
                    <tr>
                        <td><span class="editable" data-field="ncrNumber">2024-001</span></td>
                        <td><span class="editable" data-field="supplierName">Supplier A</span></td>
                        <td><span class="editable" data-field="productName">Product X</span></td>
                        <td><span class="editable" data-field="status">Open</span></td>
                        <td><span class="editable" data-field="createdDate">01/15/2024</span></td>
                        <td>
                            <button class="edit-btn">Edit</button>
                            <button class="update-btn">Update</button>
                            <button class="cancel-btn">Cancel</button>
                            <button class="delete-btn">Delete</button>
                        </td>
                    </tr>
                    <!-- More rows... -->
                </tbody>
            </table>
            
            <!-- Button to start a new NCR -->
            <button id="new-ncr-button">Start New NCR</button>
        </section>
          <!-- Modal Structure -->
          <div id="ncrModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>NCR Description</h2>
                <p id="modal-description"></p>
            </div>
        </div>

    </main>
    <footer>
        <small>NCR-CROSS</small>
    </footer>
    <script src="javascript/app.js"></script>
    <script src="javascript/home.js"></script>
    <script src="javascript/login.js"></script>
    <script>
        document.getElementById("new-ncr-button").addEventListener("click", function() {
        window.location.href = "new.html";
        });

        document.addEventListener("DOMContentLoaded", function () {
            // Handle Edit button click
            document.querySelectorAll(".edit-btn").forEach(button => {
                button.addEventListener("click", function () {
                    const row = this.closest("tr");
                    toggleEditMode(row, true);
                });
            });

            // Handle Update button click
            document.querySelectorAll(".update-btn").forEach(button => {
                button.addEventListener("click", function () {
                    const row = this.closest("tr");
                    updateNCR(row);
                    toggleEditMode(row, false);
                });
            });

            // Handle Cancel button click
            document.querySelectorAll(".cancel-btn").forEach(button => {
                button.addEventListener("click", function () {
                    const row = this.closest("tr");
                    cancelEdit(row);
                    toggleEditMode(row, false);
                });
            });

            // Handle Delete button click
            document.querySelectorAll(".delete-btn").forEach(button => {
                button.addEventListener("click", function () {
                    const row = this.closest("tr");
                    deleteRow(row);
                });
            });

            // Toggle between edit and view modes
            function toggleEditMode(row, isEditing) {
                row.querySelectorAll(".editable").forEach(span => {
                    const fieldValue = span.textContent;
                    if (isEditing) {
                        // Replace text content with an input field
                        span.innerHTML = `<input type="text" value="${fieldValue}" data-original="${fieldValue}" />`;
                    } else {
                        // Restore the original value or updated value
                        const input = span.querySelector("input");
                        if (input) {
                            span.textContent = input.value;
                        }
                    }
                });

                // Toggle visibility of buttons
                row.querySelector(".edit-btn").style.display = isEditing ? "none" : "inline-block";
                row.querySelector(".update-btn").style.display = isEditing ? "inline-block" : "none";
                row.querySelector(".cancel-btn").style.display = isEditing ? "inline-block" : "none";

                // Hide Delete button in edit mode
                row.querySelector(".delete-btn").style.display = isEditing ? "none" : "inline-block";
            }

            // Update NCR with new values
            function updateNCR(row) {
                const ncrData = {};
                row.querySelectorAll(".editable").forEach(span => {
                    const input = span.querySelector("input");
                    if (input) {
                        const field = span.getAttribute("data-field");
                        ncrData[field] = input.value;
                    }
                });
 
                alert("Updated NCR Data:", ncrData);
                // You can send the updated data to the server here via AJAX if needed
            }

            // Cancel the editing and restore original values
            function cancelEdit(row) {
                row.querySelectorAll(".editable").forEach(span => {
                    const input = span.querySelector("input");
                    if (input) {
                        // Restore the original value stored in 'data-original'
                        span.textContent = input.getAttribute("data-original");
                    }
                });
            }

            // Delete the row from the table
            function deleteRow(row) {
                if (confirm("Are you sure you want to delete this NCR?")) {
                    row.remove();
                    alert("NCR deleted.");
                    // You can send a delete request to the server here via AJAX if needed
                }
            }
        });
    </script>
</body>
</html>
